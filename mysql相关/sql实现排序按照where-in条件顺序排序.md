# sql实现排序按照where-in条件顺序排序

准备表如下：

```sql
 CREATE TABLE `log` (
  `id` int(10) NOT NULL AUTO_INCREMENT COMMENT '日志id',
  `num` int(10) NOT NULL COMMENT '序列号',
  `ip` varchar(20) NOT NULL DEFAULT '',
  `create_at` timestamp NULL DEFAULT '0000-00-00 00:00:00' COMMENT '创建时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=41 DEFAULT CHARSET=utf8;
```

数据准备入下：
```sql
INSERT INTO `log` (`id`,`num`,`ip`,`create_at`)  
VALUES
(21,193,'183.129.168.195','2016-04-19 17:29:16'),
(22,194,'183.129.168.195','2016-04-19 17:29:16'),
(23,195,'183.129.168.195','2016-04-19 17:29:16'),
(24,196,'183.129.168.195','2016-04-19 17:29:16'),
(25,197,'183.129.168.195','2016-04-19 17:29:16'),
(26,198,'183.129.168.195','2016-04-19 17:29:17'),
(27,199,'183.129.168.195','2016-04-19 17:29:17');
```

### 1. 查询方式一

```
mysql> select * from log where id in(25,21,27,24) order by field(id,25,21,27,24);
```
<pre>
+----+-----+-----------------+---------------------+
| id | num | ip              | create_at           |
+----+-----+-----------------+---------------------+
| 25 | 197 | 183.129.168.195 | 2016-04-19 17:29:16 |
| 21 | 193 | 183.129.168.195 | 2016-04-19 17:29:16 |
| 27 | 199 | 183.129.168.195 | 2016-04-19 17:29:17 |
| 24 | 196 | 183.129.168.195 | 2016-04-19 17:29:16 |
+----+-----+-----------------+---------------------+
</pre>

### 2. 查询方式二

```
mysql> select * from log where id in(25,21,27,24) order by find_in_set(id,'25,21,27,24');
```
<pre>
+----+-----+-----------------+---------------------+
| id | num | ip              | create_at           |
+----+-----+-----------------+---------------------+
| 25 | 197 | 183.129.168.195 | 2016-04-19 17:29:16 |
| 21 | 193 | 183.129.168.195 | 2016-04-19 17:29:16 |
| 27 | 199 | 183.129.168.195 | 2016-04-19 17:29:17 |
| 24 | 196 | 183.129.168.195 | 2016-04-19 17:29:16 |
+----+-----+-----------------+---------------------+
</pre>

### 3. tp5查询

```php
$ids = array(25,21,27,24);
$where = array();
$where['id'] = array('in',$ids);
$order = 'field(id,'.implode(',',$ids).')';
$data = model('log')->where($where)->order($order)->select();
```
